{"ast":null,"code":"import _slicedToArray from\"C:/Users/Harry/chatroom/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Chat from'./Chat.js';import LoginPage from'./LoginPage.js';import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";function App(props){useEffect(function(){props.firebase.database().ref('chatlog').on('value',function(snapshot){var items=snapshot.val();if(items){items=Object.values(items);}else{items=[];}setChatLog(items);});},[props.firebase]);var _useState=useState('botherme'),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),messageInput=_useState4[0],setMessageInput=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),chatLog=_useState6[0],setChatLog=_useState6[1];var _useState7=useState('login'),_useState8=_slicedToArray(_useState7,2),appState=_useState8[0],setAppState=_useState8[1];var onChange=function onChange(evt){return setMessageInput(evt.target.value);};var onSubmit=function onSubmit(evt){evt.preventDefault();if(messageInput.length===0)return;var payload={message:messageInput,username:username};props.firebase.database().ref('chatlog').push(payload);setMessageInput('');};var onLogin=function onLogin(username){setUsername(username);setAppState('Chat');};return/*#__PURE__*/_jsx(\"div\",{className:\"chat-container\",children:appState==='login'?/*#__PURE__*/_jsx(LoginPage,{onLogin:onLogin}):/*#__PURE__*/_jsx(Chat,{username:username,chatLog:chatLog,messageInput:messageInput,onChange:onChange,onSubmit:onSubmit})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Chat","LoginPage","jsx","_jsx","App","props","firebase","database","ref","on","snapshot","items","val","Object","values","setChatLog","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","messageInput","setMessageInput","_useState5","_useState6","chatLog","_useState7","_useState8","appState","setAppState","onChange","evt","target","value","onSubmit","preventDefault","length","payload","message","push","onLogin","className","children"],"sources":["C:/Users/Harry/chatroom/src/App.js"],"sourcesContent":["import React, { useState, useEffect} from 'react';\nimport Chat from './Chat.js';\nimport LoginPage from './LoginPage.js';\nimport './App.css';\n\nfunction App(props) {\n\n  useEffect(() => {\n    props.firebase.database().ref('chatlog').on('value', snapshot => {\n      let items = snapshot.val();\n      if (items) {\n        items = Object.values(items);\n      } else {\n        items = [];\n      }\n      setChatLog(items);\n    })\n  }, [props.firebase])\n\n  const [username, setUsername] = useState ('botherme');\n  const [messageInput, setMessageInput] = useState ('');\n  const [chatLog, setChatLog] = useState ([]);\n  const [appState, setAppState] = useState ('login');\n  \n  const onChange = (evt) => setMessageInput(evt.target.value);\n  const onSubmit = function(evt) {\n    evt.preventDefault();\n    if (messageInput.length ===0) return;\n    let payload = {message: messageInput, username: username};\n    props.firebase.database().ref('chatlog').push(payload);\n    setMessageInput('');\n  }\n  const onLogin = function(username) {\n    setUsername(username);\n    setAppState('Chat');\n  }\n\n  return (\n    <div className=\"chat-container\">\n      {\n      appState === 'login' ?\n        <LoginPage onLogin={onLogin} /> :\n        <Chat username={username}\n              chatLog={chatLog}\n              messageInput={messageInput}\n              onChange={onChange}\n              onSubmit={onSubmit} />\n    }\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"6GAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CACjD,MAAO,CAAAC,IAAI,KAAM,WAAW,CAC5B,MAAO,CAAAC,SAAS,KAAM,gBAAgB,CACtC,MAAO,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEnB,QAAS,CAAAC,GAAGA,CAACC,KAAK,CAAE,CAElBN,SAAS,CAAC,UAAM,CACdM,KAAK,CAACC,QAAQ,CAACC,QAAQ,EAAE,CAACC,GAAG,CAAC,SAAS,CAAC,CAACC,EAAE,CAAC,OAAO,CAAE,SAAAC,QAAQ,CAAI,CAC/D,GAAI,CAAAC,KAAK,CAAGD,QAAQ,CAACE,GAAG,EAAE,CAC1B,GAAID,KAAK,CAAE,CACTA,KAAK,CAAGE,MAAM,CAACC,MAAM,CAACH,KAAK,CAAC,CAC9B,CAAC,IAAM,CACLA,KAAK,CAAG,EAAE,CACZ,CACAI,UAAU,CAACJ,KAAK,CAAC,CACnB,CAAC,CAAC,CACJ,CAAC,CAAE,CAACN,KAAK,CAACC,QAAQ,CAAC,CAAC,CAEpB,IAAAU,SAAA,CAAgClB,QAAQ,CAAE,UAAU,CAAC,CAAAmB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA9CG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAAwCvB,QAAQ,CAAE,EAAE,CAAC,CAAAwB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA9CE,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IACpC,IAAAG,UAAA,CAA8B3B,QAAQ,CAAE,EAAE,CAAC,CAAA4B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAApCE,OAAO,CAAAD,UAAA,IAAEX,UAAU,CAAAW,UAAA,IAC1B,IAAAE,UAAA,CAAgC9B,QAAQ,CAAE,OAAO,CAAC,CAAA+B,UAAA,CAAAX,cAAA,CAAAU,UAAA,IAA3CE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAE5B,GAAM,CAAAG,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAIC,GAAG,QAAK,CAAAT,eAAe,CAACS,GAAG,CAACC,MAAM,CAACC,KAAK,CAAC,GAC3D,GAAM,CAAAC,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAYH,GAAG,CAAE,CAC7BA,GAAG,CAACI,cAAc,EAAE,CACpB,GAAId,YAAY,CAACe,MAAM,GAAI,CAAC,CAAE,OAC9B,GAAI,CAAAC,OAAO,CAAG,CAACC,OAAO,CAAEjB,YAAY,CAAEJ,QAAQ,CAAEA,QAAQ,CAAC,CACzDd,KAAK,CAACC,QAAQ,CAACC,QAAQ,EAAE,CAACC,GAAG,CAAC,SAAS,CAAC,CAACiC,IAAI,CAACF,OAAO,CAAC,CACtDf,eAAe,CAAC,EAAE,CAAC,CACrB,CAAC,CACD,GAAM,CAAAkB,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAYvB,QAAQ,CAAE,CACjCC,WAAW,CAACD,QAAQ,CAAC,CACrBY,WAAW,CAAC,MAAM,CAAC,CACrB,CAAC,CAED,mBACE5B,IAAA,QAAKwC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAE7Bd,QAAQ,GAAK,OAAO,cAClB3B,IAAA,CAACF,SAAS,EAACyC,OAAO,CAAEA,OAAQ,EAAG,cAC/BvC,IAAA,CAACH,IAAI,EAACmB,QAAQ,CAAEA,QAAS,CACnBQ,OAAO,CAAEA,OAAQ,CACjBJ,YAAY,CAAEA,YAAa,CAC3BS,QAAQ,CAAEA,QAAS,CACnBI,QAAQ,CAAEA,QAAS,EAAG,EAE1B,CAEV,CAEA,cAAe,CAAAhC,GAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}